{% extends 'base.html' %}
{% load static %}

{% block title %}
{{ title }}
{% endblock %}

{%  block main %}

    <div class="container">
        <header>
            <h3>üõí –ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫</h3>
            <p class="subtitle">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –Ω–∞—à–µ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–µ</p>
        </header>

        <div class="cart-container">
            <div class="products-section">
                <h2 class="section-title">–¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ</h2>

                <table class="cart-table">
                    <thead>
                        <tr>
                            <th>–ü—Ä–æ–¥—É–∫—Ç</th>
                            <th>–¶–µ–Ω–∞</th>
                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                            <th>–°—Ç–æ–∏–º–æ—Å—Ç—å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in order_products %}
                        <tr>
                            <td>
                                <div class="product-info">
                                    <a href="{% url 'product_page' item.product.slug %}"><img src="{{ item.product.get_first_photo }}" alt="–°–º–∞—Ä—Ç—Ñ–æ–Ω" class="product-image"></a>
                                    <div>
                                        <div class="product-name"><a href="{% url 'product_page' item.product.slug %}">{{ item.product.title }}</a></div>
                                        <div class="product-category">{{ item.product.category }}</div>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div class="price">{{ item.product.price }} BYN</div>
                            </td>
                            <td>
                                <div class="quantity-controls">
                                    {% if 'cart' in request.path %}
                                        <a href="{% url 'to_cart' item.product.pk 'delete' %}" class="quantity-link">
                                            <button type="button" class="quantity-btn">-</button>
                                        </a>
                                        <span class="quantity-display">{{ item.quantity }}</span>
                                        <a href="{% url 'to_cart' item.product.pk 'add' %}" class="quantity-link">
                                            <button type="button" class="quantity-btn">+</button>
                                        </a>
                                    {% endif %}
                                </div>
                            </td>
                            <td>
                                <div class="item-total">{{ item.get_total_price }} BYN</div>
                            </td>
                            <td>
                                <a href="{% url 'to_cart' item.product.pk 'remove' %}"><button class="remove-btn">–£–¥–∞–ª–∏—Ç—å</button></a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <div class="actions">
                    <a href="{% url 'index' %}"><button class="action-btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</button></a>
                </div>
            </div>

            <div class="summary-section">
                <h2 class="section-title">–°–≤–æ–¥–∫–∞ –∑–∞–∫–∞–∑–∞</h2>

                <div class="summary-row">
                    <span class="summary-label">–¢–æ–≤–∞—Ä—ã ({{ order.get_cart_total_quantity }} —à—Ç.)</span>
                    <span class="summary-value">{{ order.get_cart_total_price }} BYN</span>
                </div>
<!--                <div class="summary-row">-->
<!--                    <span class="summary-label">–°–∫–∏–¥–∫–∞</span>-->
<!--                    <span class="summary-value">- 5 000 ‚ÇΩ</span>-->
<!--                </div>-->
                <div class="summary-row">
                    <span class="summary-label">–î–æ—Å—Ç–∞–≤–∫–∞</span>
                    <span class="summary-value">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                </div>

                <div class="total-row">
                    <span class="total-label">–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</span>
                    <span class="total-value">{{ order.get_cart_total_price }} BYN</span>
                </div>

<!--                <div class="discount-code">-->
<!--                    <input type="text" class="discount-input" placeholder="–ü—Ä–æ–º–æ–∫–æ–¥">-->
<!--                    <button class="apply-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>-->
<!--                </div>-->

                <a href="{% url 'checkout' %}"><button class="checkout-btn">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—é</button></a>
                <a href="{% url 'index' %}" class="continue-shopping">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</a>
            </div>
        </div>
    </div>


{% endblock main %}